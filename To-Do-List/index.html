<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do-List</title>
    <link rel="stylesheet" href="style.css" type="text/css">
</head>
<body>
    <div class="container">
        <div class="todo-app">
            <h2>To-Do List <img src="images/icon.png" alt="icon"></h2>
            <div class="row">
                <input type="text" id="input-box" placeholder="Add your text">
                <button onclick="addTask()">Add</button>
            </div>
            <ul id="list-container">
                <!--<li class="checked">Task 1</li>
                <li>Task 2</li>
                <li>Task 3</li>-->
            </ul>
        </div>
    </div>
    <script src="script.js"></script>
</body>

    
</html>


/* Pagination */
.pagination-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1.5rem;
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 2px solid #e2e8f0;
}

.pagination-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.625rem 1.25rem;
    background: linear-gradient(135deg, #113f67 0%, #38598b 100%);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.pagination-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(17, 63, 103, 0.4);
}

.pagination-btn:disabled {
    background: #cbd5e0;
    cursor: not-allowed;
    opacity: 0.6;
}

.pagination-info {
    font-size: 0.95rem;
    font-weight: 600;
    color: #4a5568;
}

@media (max-width: 768px) {
    .pagination-container {
        flex-direction: column;
        gap: 1rem;
    }

    .pagination-btn {
        width: 100%;
        justify-content: center;
    }
}








import React, { useEffect, useState } from 'react';
import { FileText, User, Phone, Calendar, CheckCircle, XCircle, Filter, X, Search, Eye, ArrowLeft, Download, ChevronLeft, ChevronRight } from 'lucide-react';
import VerificationDetails from './VerificationDetails';
import './DocumentVerificationApp.css'
import axios from 'axios';

const API_BASE = "http://localhost:8080";
 

 
const DocumentVerificationApp = () => {
  const [view, setView] = useState('list');
  const [selectedApp, setSelectedApp] = useState(null);
  const [applications, setApplications] = useState([]);
  const [showFilters, setShowFilters] = useState(false);
  const [showRejectModal, setShowRejectModal] = useState(false);
  const [showReasonModal, setShowReasonModal] = useState(false);
  const [selectedReason, setSelectedReason] = useState('');
  const [rejectionReason, setRejectionReason] = useState('');
  const [rejectionError, setRejectionError] = useState('');
  const [currentPage, setCurrentPage] = useState(1);
  const [itemsPerPage] = useState(10);
  const [filters, setFilters] = useState({
    search: '',
    status: 'all',
    cardType: 'all'
  });

  const token = localStorage.getItem("token");


  const fetchPendingApplications = async () => {
    try {
      const res = await axios.get(`${API_BASE}/api/document-verification/pending`, {
        headers: { Authorization: `Bearer ${token}` }
      });

      const mapped = res.data.map(app => ({
        id: app.appId,
        userName: app.fullName,
        email: app.email,
        phone: app.phoneNumber,
        submittedDate: app.submittedAt?.split("T")[0],
        status: app.documentVerificationStatus.toLowerCase(),
        cardType: app.cardType
      }));

      setApplications(mapped);

    } catch (err) {
      console.error("Fetch error", err);
    }
  };

  useEffect(() => {
    fetchPendingApplications();
  }, [view]);
 
  const filteredApplications = applications.filter(app => {
    const searchLower = filters.search.toLowerCase();
    const matchesSearch = filters.search === '' ||
                         app.userName.toLowerCase().includes(searchLower) ||
                         app.id.toLowerCase().includes(searchLower) ||
                         app.email.toLowerCase().includes(searchLower) ||
                         app.phone.includes(filters.search) ||
                         app.submittedDate.includes(filters.search) ||
                         app.cardType.toLowerCase().includes(searchLower);
    const matchesStatus = filters.status === 'all' || app.status === filters.status;
    const matchesCardType = filters.cardType === 'all' || app.cardType === filters.cardType;
    return matchesSearch && matchesStatus && matchesCardType;
  });

  // Pagination
  const indexOfLastItem = currentPage * itemsPerPage;
  const indexOfFirstItem = indexOfLastItem - itemsPerPage;
  const currentItems = filteredApplications.slice(indexOfFirstItem, indexOfLastItem);
  const totalPages = Math.ceil(filteredApplications.length / itemsPerPage);

  const paginate = (pageNumber) => setCurrentPage(pageNumber);
 
  const stats = {
    total: applications.length,
    pending: applications.filter(a => a.status === 'in_progress').length
  };
 
  const activeFiltersCount = Object.values(filters).filter(v => v !== '' && v !== 'all').length;
 
 const handleVerify = (app) => {
    setSelectedApp(app);
    setView("details");
  };

  
 
  const handleApprove = () => {
    setApplications(prev => prev.map(app =>
      app.id === selectedApp.id ? { ...app, status: 'approved' } : app
    ));
    setView('list');
    setSelectedApp(null);
  };
 
  const handleReject = () => {
    if (!rejectionReason.trim()) {
      setRejectionError('Please provide a rejection reason');
      return;
    }
    setApplications(prev => prev.map(app =>
      app.id === selectedApp.id ? { ...app, status: 'rejected', rejectionReason } : app
    ));
    setShowRejectModal(false);
    setRejectionReason('');
    setRejectionError('');
    setView('list');
    setSelectedApp(null);
  };
 
  const resetFilters = () => {
    setFilters({ search: '', status: 'all', cardType: 'all' });
    setCurrentPage(1);
  };

  const getStatusBadge = (status) => {
    const badges = {
      in_progress: { class: 'status-inprogress', icon: <Calendar size={16} />, text: 'Progress' },
      approved: { class: 'status-approved', icon: <CheckCircle size={16} />, text: 'Approved' },
      rejected: { class: 'status-rejected', icon: <XCircle size={16} />, text: 'Rejected' }
    };

    const badge = badges[status] || badges.in_progress;

    return (
      <span className={`status-badge ${badge.class}`}>
        {badge.icon}
        {badge.text}
      </span>
    );
  };
 
  if (view === 'details' && selectedApp) {
    return <VerificationDetails
      application={selectedApp}
      onBack={() => { setView('list'); setSelectedApp(null); }}
      onApprove={handleApprove}
      onReject={() => setShowRejectModal(true)}
      showRejectModal={showRejectModal}
      setShowRejectModal={setShowRejectModal}
      rejectionReason={rejectionReason}
      setRejectionReason={setRejectionReason}
      rejectionError={rejectionError}
      setRejectionError={setRejectionError}
      handleRejectSubmit={handleReject}
    />;
  }
 
  return (

    <div className="verification-container">
      <header className="verification-header">
        <div className="header-content">
          <div className="header-left">
            <h1 className="page-title">Document Verification</h1>
            <p className="page-subtitle">Review and verify submitted documents</p>
          </div>
          <div className="header-stats">
            <div className="stat-card">
              <div className="stat-icon stat-icon-total">
                <FileText size={24} />
              </div>
              <div className="stat-info">
                <p className="stat-label">Total Applications</p>
                <p className="stat-value">{stats.total}</p>
              </div>
            </div>
            <div className="stat-card">
              <div className="stat-icon stat-icon-pending">
                <Calendar size={24} />
              </div>
              <div className="stat-info">
                <p className="stat-label">Pending Review</p>
                <p className="stat-value">{stats.pending}</p>
              </div>
            </div>
          </div>
        </div>
      </header>

      <div className="verification-content">
        <div className="filters-section">
          <div className="filters-header">
            <button
              className={`filter-toggle-btn ${showFilters ? 'active' : ''}`}
              onClick={() => setShowFilters(!showFilters)}
              style={{
                display: 'flex',
                alignItems: 'center',
                gap: '0.5rem',
                padding: '0.75rem 1.5rem',
                background: showFilters ? 'linear-gradient(135deg, #113f67 0%, #38598b 100%)' : 'linear-gradient(135deg, #113f67 0%, #38598b 100%)',
                color: 'white',
                border: 'none',
                borderRadius: '12px',
                fontSize: '0.95rem',
                fontWeight: '600',
                cursor: 'pointer',
                transition: 'all 0.3s ease',
                position: 'relative',
                overflow: 'hidden'
              }}
            >
              <Filter size={20} />
              Filters
              {activeFiltersCount > 0 && (
                <span className="filter-count">{activeFiltersCount}</span>
              )}
            </button>
            {activeFiltersCount > 0 && (
              <button className="reset-filters-btn" onClick={resetFilters}>
                <X size={16} />
                Reset Filters
              </button>
            )}
          </div>
          <div className={`filters-content ${showFilters ? 'show' : ''}`}>
            <div className="filter-grid">
              <div className="filter-group">
                <label className="filter-label">Search</label>
                <div className="search-input-wrapper">
                  <Search size={18} />
                  <input
                    type="text"
                    className="filter-input"
                    placeholder="Search by name, ID, email, phone, date..."
                    value={filters.search}
                    onChange={(e) => {
                      setFilters({...filters, search: e.target.value});
                      setCurrentPage(1);
                    }}
                  />
                </div>
              </div>
              <div className="filter-group">
                <label className="filter-label">Status</label>
                <select
                  className="filter-select"
                  value={filters.status}
                  onChange={(e) => {
                    setFilters({...filters, status: e.target.value});
                    setCurrentPage(1);
                  }}
                >
                  <option value="all">All Status</option>
                  <option value="in_progress">Progress</option>
                  <option value="approved">Approved</option>
                  <option value="rejected">Rejected</option>
                </select>
              </div>
              <div className="filter-group">
                <label className="filter-label">Card Type</label>
                <select
                  className="filter-select"
                  value={filters.cardType}
                  onChange={(e) => {
                    setFilters({...filters, cardType: e.target.value});
                    setCurrentPage(1);
                  }}
                >
                  <option value="all">All Types</option>
                  <option value="GOLD">Gold</option>
                  <option value="PLATINUM">Platinum</option>
                  <option value="SILVER">silver</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <div className="table-container">
          <div className="table-wrapper">
            {currentItems.length > 0 ? (
              <table className="applications-table">
                <thead>
                  <tr>
                    <th>Application ID</th>
                    <th>User Name</th>
                    <th>Submitted Date</th>
                    <th>Status</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  {currentItems.map((app, idx) => (
                    <tr key={app.id}>
                      <td><span className="app-id">{app.id.substring(0,8)}</span></td>
                      <td><div className="user-name">{app.userName}</div></td>
                      <td><span className="date-text">{app.submittedDate}</span></td>
                      <td>{getStatusBadge(app.status)}</td>
                      <td>
                        <button className="verify-btn" onClick={() => handleVerify(app)}>
                          <Eye size={18} />
                          Verify
                        </button>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            ) : (
              <p>No pending applications found.</p>
            )}

            {/* Pagination */}
            {totalPages > 1 && (
              <div className="pagination-container">
                <button 
                  className="pagination-btn"
                  onClick={() => paginate(currentPage - 1)}
                  disabled={currentPage === 1}
                >
                  <ChevronLeft size={18} />
                  Previous
                </button>
                <div className="pagination-info">
                  Page {currentPage} of {totalPages}
                </div>
                <button 
                  className="pagination-btn"
                  onClick={() => paginate(currentPage + 1)}
                  disabled={currentPage === totalPages}
                >
                  Next
                  <ChevronRight size={18} />
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    
   
 
      {showReasonModal && (
        <div className="modal-overlay" onClick={() => setShowReasonModal(false)}>
          <div className="simple-reason-modal" onClick={(e) => e.stopPropagation()}>
            <div className="simple-modal-header">
              <div className="reason-icon-wrapper">
                <XCircle size={24} />
              </div>
              <h3 className="simple-modal-title">Rejection Reason</h3>
              <button className="simple-modal-close" onClick={() => setShowReasonModal(false)}>
                <X size={18} />
              </button>
            </div>
            <div className="simple-modal-body">
              <div className="reason-box">
                <p className="reason-text">{selectedReason}</p>
              </div>
            </div>
            <div className="simple-modal-footer">
              <button className="simple-close-btn" onClick={() => setShowReasonModal(false)}>
                Close
              </button>
            </div>
          </div>
        </div>
      )}
     </div>
  );
};
 
export default DocumentVerificationApp;
