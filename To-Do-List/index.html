<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do-List</title>
    <link rel="stylesheet" href="style.css" type="text/css">
</head>
<body>
    <div class="container">
        <div class="todo-app">
            <h2>To-Do List <img src="images/icon.png" alt="icon"></h2>
            <div class="row">
                <input type="text" id="input-box" placeholder="Add your text">
                <button onclick="addTask()">Add</button>
            </div>
            <ul id="list-container">
                <!--<li class="checked">Task 1</li>
                <li>Task 2</li>
                <li>Task 3</li>-->
            </ul>
        </div>
    </div>
    <script src="script.js"></script>
</body>

    
</html>




import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import axios from 'axios';
import './UserApplication.css';

const API_BASE = "http://localhost:8080";

export const UserApplication = () => {
  const navigate = useNavigate();

  const [formData, setFormData] = useState({
    fullName: '',
    dateOfBirth: '',
    email: '',
    phoneNumber: '',
    cardType: '',
    address: '',
    aadharPdf: null,
    panPdf: null,
    incomeProofPdf: null,
  });

  const [uploadingFiles, setUploadingFiles] = useState({
    aadharPdf: false,
    panPdf: false,
    incomeProofPdf: false
  });

  const [errors, setErrors] = useState({});
  const [showSuccessMessage, setShowSuccessMessage] = useState(false);
  const [submitError, setSubmitError] = useState(null);
  
  // Previous application logic states
  const [currentApplication, setCurrentApplication] = useState(null);
  const [applicationHistory, setApplicationHistory] = useState([]);
  const [showHistory, setShowHistory] = useState(false);
  const [hasActiveApplication, setHasActiveApplication] = useState(false);

  useEffect(() => {
    loadApplicationData();
  }, []);

  const loadApplicationData = async () => {
    const token = localStorage.getItem('token');
    if (!token) return;

    try {
      const response = await axios.get(`${API_BASE}/api/application/my-applications`, {
        headers: { Authorization: `Bearer ${token}` }
      });

      const applications = Array.isArray(response.data) ? response.data : [response.data];
      
      if (applications && applications.length > 0) {
        // Sort by submission date (most recent first)
        const sorted = applications.sort((a, b) => 
          new Date(b.submittedAt) - new Date(a.submittedAt)
        );

        // Find in-process application (either document or offer in progress)
        const inProcessApp = sorted.find(app => 
          app.documentVerificationStatus === 'IN_PROGRESS' || 
          (app.documentVerificationStatus === 'APPROVED' && app.offerStatus === 'IN_PROGRESS')
        );
        
        // Find rejected application (latest rejected)
        const rejectedApp = sorted.find(app => 
          app.documentVerificationStatus === 'REJECTED' || app.offerStatus === 'REJECTED'
        );
        
        // Filter approved applications for history (both doc and offer approved)
        const approvedApps = sorted.filter(app => 
          app.documentVerificationStatus === 'APPROVED' && 
          app.offerStatus === 'APPROVED'
        );

        if (inProcessApp) {
          setCurrentApplication(inProcessApp);
          setHasActiveApplication(true);
        } else if (rejectedApp && approvedApps.length === 0) {
          // Only show rejected if no approved apps exist
          setCurrentApplication(rejectedApp);
          setHasActiveApplication(false);
        } else {
          setCurrentApplication(null);
          setHasActiveApplication(false);
        }

        setApplicationHistory(approvedApps);
      }
    } catch (error) {
      console.error('Error loading applications:', error);
    }
  };

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData(prev => ({ ...prev, [name]: value }));
    if (errors[name]) setErrors(prev => ({ ...prev, [name]: '' }));
  };

  const handleFileChange = (e, field) => {
    const file = e.target.files && e.target.files[0];
    if (!file) return;

    setUploadingFiles(prev => ({ ...prev, [field]: true }));

    setTimeout(() => {
      setFormData(prev => ({ ...prev, [field]: file }));
      setUploadingFiles(prev => ({ ...prev, [field]: false }));
      if (errors[field]) setErrors(prev => ({ ...prev, [field]: '' }));
    }, 700);
  };

  const validate = () => {
    const newErrors = {};

    if (!formData.fullName.trim()) newErrors.fullName = 'Full name is required';
    if (!formData.dateOfBirth) newErrors.dateOfBirth = 'DOB is required';
    if (!formData.email.trim()) newErrors.email = 'Email is required';
    else if (!/\S+@\S+\.\S+/.test(formData.email)) newErrors.email = 'Email is invalid';
    if (!formData.phoneNumber.trim()) newErrors.phoneNumber = 'Phone number is required';
    else if (!/^\d{10}$/.test(formData.phoneNumber)) newErrors.phoneNumber = 'Phone number must be 10 digits';
    if (!formData.address.trim()) newErrors.address = 'Address is required';
    if (!formData.cardType) newErrors.cardType = 'Select card type';
    if (!formData.aadharPdf) newErrors.aadharPdf = 'Aadhar PDF is required';
    if (!formData.panPdf) newErrors.panPdf = 'PAN PDF is required';
    if (!formData.incomeProofPdf) newErrors.incomeProofPdf = 'Income proof PDF is required';

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSubmitError(null);

    if (!validate()) {
      return;
    }

    const token = localStorage.getItem('token');
    if (!token) {
      alert('Please login first to get a token');
      return;
    }

    try {
      const payload = new FormData();
      payload.append('fullName', formData.fullName);
      payload.append('dateOfBirth', formData.dateOfBirth);
      payload.append('email', formData.email);
      payload.append('phoneNumber', formData.phoneNumber);
      payload.append('cardType', formData.cardType);
      payload.append('address', formData.address);
      payload.append('aadharPdf', formData.aadharPdf);
      payload.append('panPdf', formData.panPdf);
      payload.append('incomeProofPdf', formData.incomeProofPdf);

      setUploadingFiles({ aadharPdf: true, panPdf: true, incomeProofPdf: true });

      const response = await axios.post(
        `${API_BASE}/api/application/submit`,
        payload,
        {
          headers: {
            Authorization: `Bearer ${token}`,
          },
          timeout: 30000
        }
      );

      setShowSuccessMessage(true);
      setUploadingFiles({ aadharPdf: false, panPdf: false, incomeProofPdf: false });

      setFormData({
        fullName: '',
        dateOfBirth: '',
        email: '',
        phoneNumber: '',
        cardType: '',
        address: '',
        aadharPdf: null,
        panPdf: null,
        incomeProofPdf: null,
      });

      setTimeout(() => {
        setShowSuccessMessage(false);
        navigate('/status');
      }, 1600);

    } catch (err) {
      setUploadingFiles({ aadharPdf: false, panPdf: false, incomeProofPdf: false });
      const message = err?.response?.data?.message || err.message || 'Submission failed';
      setSubmitError(message);
      console.error('Submit error:', err);
    }
  };

  const handleNewApplication = () => {
    setCurrentApplication(null);
    setHasActiveApplication(false);
    setShowHistory(false);
    setFormData({
      fullName: '',
      dateOfBirth: '',
      email: '',
      phoneNumber: '',
      cardType: '',
      address: '',
      aadharPdf: null,
      panPdf: null,
      incomeProofPdf: null,
    });
  };

  const toggleHistory = () => {
    setShowHistory(!showHistory);
  };

  const getStatusBadgeClass = (status) => {
    switch(status) {
      case 'APPROVED': return 'status-approved';
      case 'REJECTED': return 'status-rejected';
      case 'IN_PROGRESS': return 'status-process';
      default: return '';
    }
  };

  const getStatusText = (status) => {
    switch(status) {
      case 'APPROVED': return 'Approved';
      case 'REJECTED': return 'Rejected';
      case 'IN_PROGRESS': return 'In Process';
      default: return status;
    }
  };

  const fileLabel = (file, placeholder) => {
    if (!file) return (
      <div className="file-placeholder">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
        <span>{placeholder}</span>
      </div>
    );
    return (
      <div className="file-uploaded">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M9 12l2 2 4-4"/>
          <circle cx="12" cy="12" r="10"/>
        </svg>
        <span>{file.name}</span>
      </div>
    );
  };

  const isRejected = currentApplication && 
    (currentApplication.documentVerificationStatus === 'REJECTED' || 
     currentApplication.offerStatus === 'REJECTED');

  return (
    <div className="application-container">
      {showSuccessMessage && (
        <div className="success-toast">
          <div className="success-toast-content">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M9 12l2 2 4-4"/>
              <circle cx="12" cy="12" r="10"/>
            </svg>
            <span>Application submitted successfully! Redirecting to status page...</span>
          </div>
        </div>
      )}

      {submitError && (
        <div className="error-banner">
          <span>{submitError}</span>
        </div>
      )}

      <div className="form-header">
        <h1 className="form-title" style={{ backgroundImage: "linear-gradient(to bottom, #007b8f, #00434e)", WebkitBackgroundClip: "text", backgroundClip: "text", color: "transparent", WebkitTextFillColor: "transparent" }}>
          Credit Card Application
        </h1>
        <p className="form-subtitle">Fill in your details to apply for a credit card</p>
      </div>

      {/* Application History Toggle */}
      {applicationHistory.length > 0 && !hasActiveApplication && !isRejected && (
        <div className="history-toggle-section">
          <button className="history-toggle-btn" onClick={toggleHistory}>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            {showHistory ? 'Hide' : 'View'} Application History ({applicationHistory.length})
          </button>
        </div>
      )}

      {/* Application History */}
      {showHistory && applicationHistory.length > 0 && (
        <div className="history-container">
          <h2 className="history-title">Previous Applications</h2>
          <div className="history-list">
            {applicationHistory.map((app) => (
              <div key={app.appId} className="history-card">
                <div className="history-header">
                  <div className="history-info">
                    <h3 className="history-name">{app.fullName}</h3>
                    <p className="history-date">
                      Application ID: {app.appId.substring(0, 8)}...
                    </p>
                    <p className="history-date">
                      {new Date(app.submittedAt).toLocaleDateString('en-IN', {
                        day: 'numeric',
                        month: 'short',
                        year: 'numeric'
                      })}
                    </p>
                  </div>
                  <span className={`status-badge ${getStatusBadgeClass(app.offerStatus)}`}>
                    {getStatusText(app.offerStatus)}
                  </span>
                </div>
                
                <div className="history-details">
                  <div className="history-detail-item">
                    <span className="history-label">Card Type:</span>
                    <span className="history-value">{app.cardType}</span>
                  </div>
                  <div className="history-detail-item">
                    <span className="history-label">Email:</span>
                    <span className="history-value">{app.email}</span>
                  </div>
                  <div className="history-detail-item">
                    <span className="history-label">Contact:</span>
                    <span className="history-value">{app.phoneNumber}</span>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      )}

      {/* Block for In-Process Application */}
      {hasActiveApplication && currentApplication ? (
        <div className="active-application-block">
          <div className="block-icon">
            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" strokeWidth="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="8" x2="12" y2="12"/>
              <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
          </div>
          <h2 className="block-title">Application In Progress</h2>
          <p className="block-message">
            You already have an active credit card application being processed. 
            You cannot submit a new application until your current one is completed.
          </p>
          <div className="block-actions">
            <button className="view-status-btn" onClick={() => navigate('/status')}>
              View Application Status
            </button>
          </div>
        </div>
      ) : isRejected && currentApplication ? (
        <div className="active-application-block">
          <div className="block-icon">
            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#dc2626" strokeWidth="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="8" x2="12" y2="12"/>
              <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
          </div>
          <h2 className="block-title">Application Rejected</h2>
          <p className="block-message">
            Your previous application was rejected. You can now apply for a new credit card.
          </p>
          <div className="block-actions">
            <button 
              className="edit-application-btn" 
              onClick={handleNewApplication}
            >
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
              Apply New Application
            </button>
          </div>
        </div>
      ) : (
        <form onSubmit={handleSubmit} className="application-form" encType="multipart/form-data">
          <div className="form-section">
            <h3 className="section-title">Personal Information</h3>

            <div className="form-grid">
              <div className="form-group">
                <label className="form-label">Full Name *</label>
                <input
                  type="text"
                  name="fullName"
                  value={formData.fullName}
                  onChange={handleInputChange}
                  className={`form-input ${errors.fullName ? 'error' : ''}`}
                  placeholder="John Doe"
                />
                {errors.fullName && <span className="error-text">{errors.fullName}</span>}
              </div>

              <div className="form-group">
                <label className="form-label">DOB *</label>
                <input
                  type="date"
                  name="dateOfBirth"
                  value={formData.dateOfBirth}
                  onChange={handleInputChange}
                  className={`form-input ${errors.dateOfBirth ? 'error' : ''}`}
                />
                {errors.dateOfBirth && <span className="error-text">{errors.dateOfBirth}</span>}
              </div>
            </div>

            <div className="form-grid">
              <div className="form-group">
                <label className="form-label">Email Address *</label>
                <input
                  type="email"
                  name="email"
                  value={formData.email}
                  onChange={handleInputChange}
                  className={`form-input ${errors.email ? 'error' : ''}`}
                  placeholder="john.doe@example.com"
                />
                {errors.email && <span className="error-text">{errors.email}</span>}
              </div>

              <div className="form-group">
                <label className="form-label">Contact Number *</label>
                <input
                  type="tel"
                  name="phoneNumber"
                  value={formData.phoneNumber}
                  onChange={handleInputChange}
                  className={`form-input ${errors.phoneNumber ? 'error' : ''}`}
                  placeholder="9876543210"
                  maxLength="10"
                />
                {errors.phoneNumber && <span className="error-text">{errors.phoneNumber}</span>}
              </div>
            </div>
          </div>

          <div className="form-section">
            <h3 className="section-title">Details</h3>
            <div className="form-grid">
              <div className="form-group">
                <label className="form-label">Address *</label>
                <textarea
                  name="address"
                  value={formData.address}
                  onChange={handleInputChange}
                  className={`form-input ${errors.address ? 'error' : ''}`}
                  placeholder="Enter your complete address"
                  rows="3"
                />
                {errors.address && <span className="error-text">{errors.address}</span>}
              </div>

              <div className="form-group">
                <label className="form-label">Card Type *</label>
                <div className="select-wrapper">
                  <select
                    name="cardType"
                    value={formData.cardType}
                    onChange={handleInputChange}
                    className={`form-select ${errors.cardType ? 'error' : ''}`}
                  >
                    <option value="">Select Card Type</option>
                    <option value="GOLD">Gold Card</option>
                    <option value="SILVER">Silver Card</option>
                    <option value="PLATINUM">Platinum Card</option>
                  </select>
                  <svg className="select-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                    <path d="M1 1L6 6L11 1" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </div>
                {errors.cardType && <span className="error-text">{errors.cardType}</span>}
              </div>
            </div>
          </div>

          <div className="form-section">
            <h3 className="section-title">Document Upload</h3>

            <div className="form-grid">
              <div className="form-group">
                <label className="form-label">Aadhar Card (PDF) *</label>
                <div className={`file-upload ${errors.aadharPdf ? 'error' : ''}`}>
                  <input
                    type="file"
                    id="aadhar"
                    accept=".pdf"
                    name="aadharPdf"
                    onChange={(e) => handleFileChange(e, 'aadharPdf')}
                    className="file-input"
                  />
                  <label htmlFor="aadhar" className="file-label">
                    {uploadingFiles.aadharPdf ? (
                      <div className="upload-loading">
                        <div className="spinner"></div>
                        <span>Uploading...</span>
                      </div>
                    ) : fileLabel(formData.aadharPdf, 'Upload Aadhar Card')}
                  </label>
                </div>
                {errors.aadharPdf && <span className="error-text">{errors.aadharPdf}</span>}
              </div>

              <div className="form-group">
                <label className="form-label">PAN Card (PDF) *</label>
                <div className={`file-upload ${errors.panPdf ? 'error' : ''}`}>
                  <input
                    type="file"
                    id="pan"
                    accept=".pdf"
                    name="panPdf"
                    onChange={(e) => handleFileChange(e, 'panPdf')}
                    className="file-input"
                  />
                  <label htmlFor="pan" className="file-label">
                    {uploadingFiles.panPdf ? (
                      <div className="upload-loading">
                        <div className="spinner"></div>
                        <span>Uploading...</span>
                      </div>
                    ) : fileLabel(formData.panPdf, 'Upload PAN Card')}
                  </label>
                </div>
                {errors.panPdf && <span className="error-text">{errors.panPdf}</span>}
              </div>
            </div>

            <div className="form-group">
              <label className="form-label">Income Tax Proof (PDF) *</label>
              <div className={`file-upload ${errors.incomeProofPdf ? 'error' : ''}`}>
                <input
                  type="file"
                  id="incomeTax"
                  accept=".pdf"
                  name="incomeProofPdf"
                  onChange={(e) => handleFileChange(e, 'incomeProofPdf')}
                  className="file-input"
                />
                <label htmlFor="incomeTax" className="file-label">
                  {uploadingFiles.incomeProofPdf ? (
                    <div className="upload-loading">
                      <div className="spinner"></div>
                      <span>Uploading...</span>
                    </div>
                  ) : fileLabel(formData.incomeProofPdf, 'Upload Income Tax Proof')}
                </label>
              </div>
              {errors.incomeProofPdf && <span className="error-text">{errors.incomeProofPdf}</span>}
            </div>
          </div>

          <div className="form-actions">
            <button type="submit" className="submit-button">
              <span>Submit Application</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <line x1="5" y1="12" x2="19" y2="12" />
                <polyline points="12 5 19 12 12 19" />
              </svg>
            </button>
          </div>
        </form>
      )}
    </div>
  );
};

export default UserApplication;
















import React, { useState, useEffect } from "react";
import { useNavigate } from "react-router-dom";
import "./UserStatus.css";
import { toast } from "react-toastify";
import axios from "axios";

const API_BASE = "http://localhost:8080";

const UserStatus = () => {
  const navigate = useNavigate();
  const [applicationData, setApplicationData] = useState(null);
  const [currentStage, setCurrentStage] = useState(1);
  const [rejectionInfo, setRejectionInfo] = useState(null);

  const token = localStorage.getItem("token");

  useEffect(() => {
    if (!token) {
      toast.error("Please login to view your applications");
      return;
    }

    const fetchApplication = async () => {
      try {
        const res = await axios.get(
          `${API_BASE}/api/application/my-applications`,
          {
            headers: { Authorization: `Bearer ${token}` },
          }
        );

        const apps = Array.isArray(res.data) ? res.data : [res.data];

        if (!apps || apps.length === 0) {
          setApplicationData(null);
          return;
        }

        // Sort by submission date (most recent first)
        const sorted = apps.sort((a, b) => 
          new Date(b.submittedAt) - new Date(a.submittedAt)
        );

        // Get the most recent application (regardless of status)
        const latestApp = sorted[0];
        setApplicationData(latestApp);
        
      } catch (error) {
        console.error("Error fetching application:", error);
        toast.error("Unable to fetch application");
      }
    };

    fetchApplication();
  }, [token]);

  useEffect(() => {
    if (!applicationData) return;

    const docStatus = applicationData.documentVerificationStatus;
    const offerStatus = applicationData.offerStatus;

    // Document verification rejected
    if (docStatus === "REJECTED") {
      setCurrentStage(2);
      setRejectionInfo({
        stage: 2,
        reason: applicationData.documentRejectReason || "Document verification failed"
      });
    } 
    // Document verification in progress
    else if (docStatus === "IN_PROGRESS") {
      setCurrentStage(2);
      setRejectionInfo(null);
    } 
    // Document approved, offer rejected
    else if (docStatus === "APPROVED" && offerStatus === "REJECTED") {
      setCurrentStage(3);
      setRejectionInfo({
        stage: 3,
        reason: applicationData.offerRejectReason || "Offer generation failed"
      });
    }
    // Document approved, offer in progress
    else if (docStatus === "APPROVED" && offerStatus === "IN_PROGRESS") {
      setCurrentStage(3);
      setRejectionInfo(null);
    }
    // Both approved
    else if (docStatus === "APPROVED" && offerStatus === "APPROVED") {
      setCurrentStage(4); // All completed
      setRejectionInfo(null);
    }
    // Just submitted
    else {
      setCurrentStage(1);
      setRejectionInfo(null);
    }
  }, [applicationData]);

  const stages = [
    {
      id: 1,
      title: "Application Submitted",
      description: "Your application has been received successfully",
    },
    {
      id: 2,
      title: "Document Verification",
      description: "Your documents are being verified by the bank",
    },
    {
      id: 3,
      title: "Offer Confirmation",
      description: "Your credit card has been approved",
    },
  ];

  const handleNewApplication = () => {
    navigate("/apply");
  };

  if (!applicationData) {
    return (
      <div className="status-container">
        <div className="empty-state">
          <h2>No Application Found</h2>
          <button className="apply-now-btn" onClick={() => navigate("/apply")}>
            Apply Now
          </button>
        </div>
      </div>
    );
  }

  const isFullyApproved = applicationData.documentVerificationStatus === "APPROVED" && 
                          applicationData.offerStatus === "APPROVED";

  return (
    <div className="status-container">
      <div className="status-header">
        <h1
          className="status-title"
          style={{
            backgroundImage: "linear-gradient(to bottom, #007b8f, #00434e)",
            WebkitBackgroundClip: "text",
            color: "transparent",
          }}
        >
          Application Status
        </h1>
        <p className="status-subtitle">Track your credit card application</p>
      </div>

      <div className="status-card">
        <div className="progress-timeline">
          {stages.map((stage, index) => {
            const isCompleted = currentStage > stage.id;
            const isCurrent = currentStage === stage.id;
            const isRejected = rejectionInfo && rejectionInfo.stage === stage.id;

            return (
              <React.Fragment key={stage.id}>
                <div className="progress-step">
                  <div
                    className={`progress-circle ${
                      isRejected
                        ? "rejected"
                        : isCompleted
                        ? "completed"
                        : isCurrent
                        ? "current"
                        : "pending"
                    }`}
                  >
                    {isRejected ? "✕" : isCompleted ? "✓" : stage.id}
                  </div>

                  <div className="progress-label">
                    <h4
                      className={`progress-title ${
                        isRejected
                          ? "rejected-text"
                          : isCompleted || isCurrent
                          ? "active"
                          : ""
                      }`}
                    >
                      {stage.title}
                    </h4>
                    <p
                      className={`progress-desc ${
                        isRejected
                          ? "rejected-text"
                          : isCompleted || isCurrent
                          ? "active"
                          : ""
                      }`}
                    >
                      {isRejected
                        ? "Verification Failed"
                        : stage.description}
                    </p>
                  </div>
                </div>

                {index < stages.length - 1 && (
                  <div
                    className={`progress-line ${
                      isRejected
                        ? "rejected"
                        : currentStage > stage.id
                        ? "completed"
                        : "pending"
                    }`}
                  ></div>
                )}
              </React.Fragment>
            );
          })}
        </div>

        {rejectionInfo && (
          <div className="rejection-alert">
            <div className="rejection-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#dc2626" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="15" y1="9" x2="9" y2="15"/>
                <line x1="9" y1="9" x2="15" y2="15"/>
              </svg>
            </div>
            <div className="rejection-content">
              <h3 className="rejection-title">Application Rejected</h3>
              <p className="rejection-stage">
                Stage: {rejectionInfo.stage === 2 ? "Document Verification" : "Offer Generation"}
              </p>
              <div className="rejection-reason">
                <strong>Reason:</strong> {rejectionInfo.reason}
              </div>
            </div>
          </div>
        )}

        <div className="applicant-info">
          <h3 className="info-section-title" style={{
            backgroundImage: "linear-gradient(to bottom, #007b8f, #00434e)",
            WebkitBackgroundClip: "text",
            backgroundClip: "text",
            color: "transparent",
            WebkitTextFillColor: "transparent"
          }}>
            Application Details
          </h3>
          <div className="info-grid">
            <div className="info-item">
              <span className="info-label">Applicant Name</span>
              <span className="info-value">{applicationData.fullName}</span>
            </div>
            <div className="info-item">
              <span className="info-label">Application ID</span>
              <span className="info-value">{applicationData.appId.substring(0, 8)}...</span>
            </div>
            <div className="info-item">
              <span className="info-label">Email Address</span>
              <span className="info-value">{applicationData.email}</span>
            </div>
            <div className="info-item">
              <span className="info-label">Contact Number</span>
              <span className="info-value">{applicationData.phoneNumber}</span>
            </div>
            <div className="info-item">
              <span className="info-label">Card Type</span>
              <span className="info-badge">{applicationData.cardType}</span>
            </div>
            <div className="info-item">
              <span className="info-label">Submitted On</span>
              <span className="info-value">
                {new Date(applicationData.submittedAt).toLocaleDateString('en-IN', {
                  day: 'numeric',
                  month: 'short',
                  year: 'numeric'
                })}
              </span>
            </div>
          </div>
        </div>

        {isFullyApproved && (
          <div className="success-banner">
            <div className="success-icon-wrapper">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" strokeWidth="3">
                <path d="M9 12l2 2 4-4"/>
                <circle cx="12" cy="12" r="10"/>
              </svg>
            </div>
            <div className="success-content">
              <h3 className="success-title">Congratulations!</h3>
              <p className="success-text">Your credit card application has been approved.</p>
              <button className="new-application-button" onClick={handleNewApplication}>
                Apply for another card
              </button>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

export default UserStatus;
